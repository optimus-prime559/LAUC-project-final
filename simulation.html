<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Simulation – Fourier’s Law Heat Flow</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
    --bg1:#c9f7f5;
    --bg2:#e6fffa;
    --accent:#0b5ed7;
    --hot:#ff5722;
}

body{
    margin:0;
    font-family:Arial, sans-serif;
    background:linear-gradient(135deg,var(--bg1),var(--bg2));
}

header{
    background:linear-gradient(90deg,#0891b2,#06b6d4);
    color:white;
    padding:18px;
    text-align:center;
    box-shadow:0 6px 14px rgba(0,0,0,0.25);
}

.container{
    display:grid;
    grid-template-columns:1fr 1.5fr 1.5fr;
    gap:18px;
    padding:18px;
}

.panel{
    background:rgba(255,255,255,0.45);
    backdrop-filter:blur(12px);
    padding:18px;
    border-radius:20px;
    box-shadow:0 12px 30px rgba(0,0,0,0.25);
}

h3{
    margin-top:0;
    border-bottom:2px solid #e5e7eb;
    padding-bottom:6px;
}

input, select{
    width:100%;
    padding:8px;
    margin:6px 0;
    border-radius:8px;
    border:1px solid #cbd5e1;
}

button{
    width:100%;
    padding:12px;
    margin-top:10px;
    border:none;
    border-radius:10px;
    background:linear-gradient(135deg,#ff9f1c,#fd7e14);
    color:white;
    font-weight:bold;
    cursor:pointer;
}

.result{
    background:rgba(255,255,255,0.7);
    padding:14px;
    border-radius:14px;
    border-left:6px solid var(--accent);
    font-size:14px;
}

canvas{
    background:white;
    border-radius:14px;
    margin-top:12px;
    box-shadow:0 6px 14px rgba(0,0,0,0.2);
}

.small{font-size:13px;color:#475569;}
</style>
</head>

<body>

<header>
    <h1>Heat Conduction Simulation</h1>
</header>

<div class="container">

<!-- INPUT -->
<div class="panel">
<h3>Input Parameters</h3>

<label>Inner Radius</label>
<input id="r1" value="5"><select id="r1unit"><option value="0.01">cm</option><option value="1">m</option></select>

<label>Outer Radius</label>
<input id="r2" value="7"><select id="r2unit"><option value="0.01">cm</option><option value="1">m</option></select>

<label>Radius for Temperature</label>
<input id="rq" value="6"><select id="rqu"><option value="0.01">cm</option><option value="1">m</option></select>

<label>Inner Temp (°C)</label><input id="T1" value="200">
<label>Outer Temp (°C)</label><input id="T2" value="50">
<label>Thermal Conductivity (W/m·K)</label><input id="k" value="45">
<label>Pipe Length</label><input id="L" value="1"><select id="Lu"><option value="1">m</option></select>
<label>Time (s)</label><input id="time" value="60">
<label>Output Unit</label><select id="unit"><option value="W">W</option><option value="cal">cal/sec</option>

<button onclick="calc()">Calculate</button>
</div>

<!-- DIAGRAM -->
<div class="panel">
<h3>Pipe Cross-Section</h3>
<canvas id="pipe" width="340" height="340"></canvas>
<p class="small">Red → hot inner surface, blue dashed → selected radius</p>
</div>

<!-- RESULTS -->
<div class="panel">
<h3>Results & Graphs</h3>
<div id="out" class="result"></div>
<canvas id="tempChart"></canvas>
<canvas id="timeChart"></canvas>
</div>

</div>

<script>
let tChart, qChart;

function draw(r1,r2,rq){
    const c=document.getElementById("pipe"),ctx=c.getContext("2d");
    ctx.clearRect(0,0,340,340);
    const cx=170,cy=170,s=120/r2;

    const R1=r1*s,R2=r2*s,Rq=rq*s;

    const g=ctx.createRadialGradient(cx,cy,R1,cx,cy,R2);
    g.addColorStop(0,"#ff5722");
    g.addColorStop(1,"#fff");

    ctx.beginPath();ctx.arc(cx,cy,R2,0,2*Math.PI);ctx.fillStyle=g;ctx.fill();
    ctx.beginPath();ctx.arc(cx,cy,R1,0,2*Math.PI);ctx.fillStyle="#fff";ctx.fill();
    ctx.stroke();

    ctx.setLineDash([6,4]);
    ctx.beginPath();ctx.arc(cx,cy,Rq,0,2*Math.PI);
    ctx.strokeStyle="#0b5ed7";ctx.lineWidth=2;ctx.stroke();
    ctx.setLineDash([]);

    ctx.fillStyle="#000";
    ctx.fillText("T₁ (Hot)",cx-20,cy-R1-8);
    ctx.fillText("T₂ (Cool)",cx-20,cy-R2-8);
}

function calc(){
    const r1=+r1v.value*r1unit.value,
          r2=+r2v.value*r2unit.value,
          rq=+rqv.value*rqu.value,
          T1=+T1v.value,T2=+T2v.value,
          k=+kv.value,L=+Lv.value,
          t=+timev.value,unit=unitv.value;

    if(rq<r1||rq>r2){out.innerHTML="Radius must be inside pipe wall";return;}

    const Q=2*Math.PI*k*L*(T1-T2)/Math.log(r2/r1);
    const Qout=unit==="cal"?Q/4.186:Q;
    const Tr=T1+(T2-T1)*Math.log(rq/r1)/Math.log(r2/r1);
    const R=Math.log(r2/r1)/(2*Math.PI*k*L);

    out.innerHTML=`
<b>Heat Flow Rate:</b> ${Qout.toFixed(3)} ${unit}<br>
<b>Total Heat Transferred (${t}s):</b> ${(Qout*t).toFixed(2)}<br>
<b>Thermal Resistance:</b> ${R.toFixed(6)} K/W<br>
<b>Radius Ratio (r₂/r₁):</b> ${(r2/r1).toFixed(3)}<br>
<b>Temperature at r:</b> ${Tr.toFixed(2)} °C<br>
<b>Formula:</b> Q = 2πkL(T₁−T₂)/ln(r₂/r₁)
`;

    draw(r1,r2,rq);

    const x=[],y=[];
    for(let i=0;i<=20;i++){
        const rv=r1+(r2-r1)*i/20;
        x.push(rv.toFixed(3));
        y.push(T1+(T2-T1)*Math.log(rv/r1)/Math.log(r2/r1));
    }

    if(tChart) tChart.destroy();
    tChart=new Chart(tempChart,{type:"line",
        data:{labels:x,datasets:[{label:"Temperature (°C)",data:y,borderColor:"#ff5722"}]}
    });

    const tt=[],qq=[];
    for(let i=0;i<=10;i++){tt.push(i*t/10);qq.push(Qout);}
    if(qChart) qChart.destroy();
    qChart=new Chart(timeChart,{type:"line",
        data:{labels:tt,datasets:[{label:"Heat Flow",data:qq,borderColor:"#0b5ed7"}]}
    });
}

const r1v=r1,r2v=r2,rqv=rq,T1v=T1,T2v=T2,kv=k,Lv=L,timev=time,unitv=unit;
calc();
</script>

</body>
</html>
